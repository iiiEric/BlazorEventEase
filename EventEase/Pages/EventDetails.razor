@page "/eventdetails/{id:int}"
@using EventEase.Data
@using EventEase.Models
@inject UserSessionService SessionService
@inject NavigationManager NavManager

@if (selectedEvent != null)
{
    <h3>@selectedEvent.Name</h3>
    <p>@selectedEvent.Date.ToShortDateString()</p>
    <p>@selectedEvent.Location</p>

    <h4>Usuarios registrados</h4>
    @if (selectedEvent.RegisteredUsers.Any())
    {
        <ul>
            @foreach (var user in selectedEvent.RegisteredUsers)
            {
                <li>@user.Name (@user.Email)</li>
            }
        </ul>
    }
    else
    {
        <p>No hay usuarios registrados todavía.</p>
    }

    <a href="@($"/register/{Id}")">Registrarse en este evento</a>

    <br />
    <!-- Botón volver atrás -->
    <button @onclick="GoBack">⬅️ Volver a la lista</button>
}
else
{
    <p>Evento no encontrado.</p>
}

@code {
    [Parameter] public int Id { get; set; }
    private EventModel? selectedEvent;

    protected override void OnInitialized()
    {
        selectedEvent = SessionService.GetEventById(Id);
    }

    private void GoBack()
    {
        NavManager.NavigateTo("/");
    }
}
